!function(e,$){"use strict";function t(n,i){this.$element=n,this.options=$.extend({},t.defaults,i),this.rules=[],this.currentPath="",this._init(),this._events(),e.registerPlugin(this)}t.defaults={rules:null},t.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"},t.prototype._init=function(){this._addBreakpoints(),this._generateRules(),this._reflow()},t.prototype._events=function(){$(window).on("resize.fndtn.interchange",e.util.throttle(this._reflow.bind(this),50))},t.prototype._reflow=function(){var e;for(var t in this.rules){var n=this.rules[t];window.matchMedia(n.query).matches&&(e=n)}e&&this.replace(e.path)},t.prototype._addBreakpoints=function(){for(var n in e.MediaQuery.queries){var i=e.MediaQuery.queries[n];t.SPECIAL_QUERIES[i.name]=i.value}},t.prototype._generateRules=function(){var e=[],n;n=this.options.rules?this.options.rules:this.$element.data("interchange").match(/\[.*?\]/g);for(var i in n){var r=n[i].slice(1,-1).split(", "),o=r.slice(0,-1).join(""),a=r[r.length-1];t.SPECIAL_QUERIES[a]&&(a=t.SPECIAL_QUERIES[a]),e.push({path:o,query:a})}this.rules=e},t.prototype.replace=function(e){if(this.currentPath!==e){var t=this;"IMG"===this.$element[0].nodeName?this.$element.attr("src",e).load(function(){t.$element.trigger("replaced.zf.interchange"),t.currentPath=e}):e.match(/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i)?this.$element.css({"background-image":"url("+e+")"}):$.get(e,function(n){t.$element.html(n),t.$element.trigger("replaced.zf.interchange"),t.currentPath=e})}},t.prototype.destroy=function(){},e.plugin(t,"Interchange"),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=t),"function"==typeof define&&define(["foundation"],function(){return t})}(Foundation,jQuery);