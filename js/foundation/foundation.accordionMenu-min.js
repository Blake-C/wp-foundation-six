!function($){"use strict";function e(i,t){this.$element=i,this.options=$.extend({},e.defaults,this.$element.data(),t),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll",TAB:"down",SHIFT_TAB:"up"})}e.defaults={slideSpeed:250,multiOpen:!0},e.prototype._init=function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"tablist","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".has-submenu"),this.$menuLinks.each(function(){var e=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),i=$(this),t=i.children("[data-submenu]"),n=t[0].id||Foundation.GetYoDigits(6,"acc-menu"),o=t.hasClass("is-active");i.attr({"aria-controls":n,"aria-expanded":o,"aria-selected":!1,role:"tab",id:e}),t.attr({"aria-labelledby":e,"aria-hidden":!o,role:"tabpanel",id:n})});var e=this.$element.find(".is-active");if(e.length){var i=this;e.each(function(){i.down($(this))})}this._events()},e.prototype._events=function(){var e=this;this.$element.find("li").each(function(){var i=$(this).children("[data-submenu]");i.length&&$(this).children("a").off("click.zf.accordionmenu").on("click.zf.accordionmenu",function(t){t.preventDefault(),e.toggle(i)})}).on("keydown.zf.accordionmenu",function(i){var t=$(this),n=t.parent("ul").children("li"),o,s,a=t.children("[data-submenu]");n.each(function(e){return $(this).is(t)?(o=n.eq(Math.max(0,e-1)),s=n.eq(Math.min(e+1,n.length-1)),$(this).children("[data-submenu]:visible").length&&(s=t.find("li:first-child")),$(this).is(":first-child")?o=t.parents("li").first():o.children("[data-submenu]:visible").length&&(o=o.find("li:last-child")),void($(this).is(":last-child")&&(s=t.parents("li").first().next("li")))):void 0}),Foundation.Keyboard.handleKey(i,e,{open:function(){a.is(":hidden")&&(e.down(a),a.find("li").first().focus())},close:function(){a.length&&!a.is(":hidden")?e.up(a):t.parent("[data-submenu]").length&&(e.up(t.parent("[data-submenu]")),t.parents("li").first().focus())},up:function(){o.focus()},down:function(){s.focus()},toggle:function(){t.children("[data-submenu]").length&&e.toggle(t.children("[data-submenu]"))},closeAll:function(){e.hideAll()},handled:function(){i.preventDefault(),i.stopImmediatePropagation()}})})},e.prototype.hideAll=function(){this.$element.find("[data-submenu]").slideUp(this.options.slideSpeed)},e.prototype.toggle=function(e){e.is(":hidden")?this.down(e):this.up(e)},e.prototype.down=function(e){var i=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(e.parentsUntil(this.$element).add(e))),e.addClass("is-active").attr({"aria-hidden":!1}).parent(".has-submenu").attr({"aria-expanded":!0,"aria-selected":!0}),Foundation.Move(this.options.slideSpeed,e,function(){e.slideDown(i.options.slideSpeed)}),this.$element.trigger("down.zf.accordionMenu",[e])},e.prototype.up=function(e){var i=this;Foundation.Move(this.options.slideSpeed,e,function(){e.slideUp(i.options.slideSpeed)}),e.attr("aria-hidden",!0).find("[data-submenu]").slideUp(0).attr("aria-hidden",!0).end().parent(".has-submenu").attr({"aria-expanded":!1,"aria-selected":!1}),this.$element.trigger("up.zf.accordionMenu",[e])},e.prototype.destroy=function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)},Foundation.plugin(e,"AccordionMenu")}(jQuery,window.Foundation);