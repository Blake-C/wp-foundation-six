!function($,t){"use strict";function i(s,e){this.$element=s,this.options=$.extend({},i.defaults,this.$element.data(),e),this._init(),t.registerPlugin(this,"Sticky")}function s(t){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*t}i.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1},i.prototype._init=function(){var i=this.$element.parent("[data-sticky-container]"),s=this.$element[0].id||t.GetYoDigits(6,"sticky"),e=this;i.length||(this.wasWrapped=!0),this.$container=i.length?i:$(this.options.container).wrapInner(this.$element),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":s}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,""!==this.options.anchor?this.$anchor=$("#"+this.options.anchor):this._parsePoints(),this._setSizes(function(){e._calc(!1)}),this._events(s.split("-").reverse().join("-"))},i.prototype._parsePoints=function(){var t=this.options.topAnchor,i=this.options.btmAnchor,s=[t,i],e={};if(t&&i)for(var o=0,n=s.length;n>o&&s[o];o++){var h;if("number"==typeof s[o])h=s[o];else{var c=s[o].split(":"),r=$("#"+c[0]);h=r.offset().top,c[1]&&"bottom"===c[1].toLowerCase()&&(h+=r[0].getBoundingClientRect().height)}e[o]=h}else e={0:1,1:document.documentElement.scrollHeight};this.points=e},i.prototype._events=function(t){var i=this,s=this.scrollListener="scroll.zf."+t;this.isOn||(this.canStick&&(this.isOn=!0,$(window).off(s).on(s,function(t){0===i.scrollCount?(i.scrollCount=i.options.checkEvery,i._setSizes(function(){i._calc(!1,window.pageYOffset)})):(i.scrollCount--,i._calc(!1,window.pageYOffset))})),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(e,o){i._setSizes(function(){i._calc(!1),i.canStick?i.isOn||i._events(t):i.isOn&&i._pauseListeners(s)})}))},i.prototype._pauseListeners=function(t){this.isOn=!1,$(window).off(t),this.$element.trigger("pause.zf.sticky")},i.prototype._calc=function(t,i){return t&&this._setSizes(),this.canStick?(i||(i=window.pageYOffset),void(i>=this.topPoint?i<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0))):(this.isStuck&&this._removeSticky(!0),!1)},i.prototype._setSticky=function(){var t=this.options.stickTo,i="top"===t?"marginTop":"marginBottom",s="top"===t?"bottom":"top",e={};e[i]=this.options[i]+"em",e[t]=0,e[s]="auto",e.left=this.$container.offset().left+parseInt(window.getComputedStyle(this.$container[0])["padding-left"],10),this.isStuck=!0,this.$element.removeClass("is-anchored is-at-"+s).addClass("is-stuck is-at-"+t).css(e).trigger("sticky.zf.stuckto:"+t)},i.prototype._removeSticky=function(t){var i=this.options.stickTo,s="top"===i,e={},o=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,n=s?"marginTop":"marginBottom",h=s?"bottom":"top",c=t?"top":"bottom";e[n]=0,t&&!s||s&&!t?(e[i]=o,e[h]=0):(e[i]=0,e[h]=o),e.left="",this.isStuck=!1,this.$element.removeClass("is-stuck is-at-"+i).addClass("is-anchored is-at-"+c).css(e).trigger("sticky.zf.unstuckfrom:"+c)},i.prototype._setSizes=function(i){this.canStick=t.MediaQuery.atLeast(this.options.stickyOn),this.canStick||i();var s=this,e=this.$container[0].getBoundingClientRect().width,o=window.getComputedStyle(this.$container[0]),n=parseInt(o["padding-right"],10);this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":e-n+"px"});var h=this.$element[0].getBoundingClientRect().height||this.containerHeight;this.containerHeight=h,this.$container.css({height:h}),this.elemHeight=h,this.isStuck&&this.$element.css({left:this.$container.offset().left+parseInt(o["padding-left"],10)}),this._setBreakPoints(h,function(){i&&i()})},i.prototype._setBreakPoints=function(t,i){if(!this.canStick){if(!i)return!1;i()}var e=s(this.options.marginTop),o=s(this.options.marginBottom),n=this.points?this.points[0]:this.$anchor.offset().top,h=this.points?this.points[1]:n+this.anchorHeight,c=window.innerHeight;"top"===this.options.stickTo?(n-=e,h-=t+e):"bottom"===this.options.stickTo&&(n-=c-(t+o),h-=c-o),this.topPoint=n,this.bottomPoint=h,i&&i()},i.prototype.destroy=function(){this._removeSticky(!0),this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger"),this.$anchor.off("change.zf.sticky"),$(window).off(this.scrollListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""}),t.unregisterPlugin(this)},t.plugin(i,"Sticky")}(jQuery,window.Foundation);